---
product: campaign
title: 針對Campaign Classicv7的硬體規模確定建議
description: 針對Campaign Classicv7的硬體規模確定建議
exl-id: c47e73a0-dbd8-43f5-a363-7e6783dc7685
source-git-commit: f4513834cf721f6d962c7c02c6c64b2171059352
workflow-type: tm+mt
source-wordcount: '2512'
ht-degree: 1%

---

# 硬體尺寸建議{#hardware-sizing-reco}

![](../../assets/v7-only.svg)

## 概覽

>[!CAUTION]
>
>本文僅作為一個通用示例指南。 您必須與您的Adobe Campaign客戶成功經理接洽，以在啟動市場活動項目之前衡量部署的準確規模。 **不要** 購買或部署任何基礎架構或硬體，直到完成此操作。

本文檔為在您的內部資料中心或虛擬化雲環境中部署Adobe Campaign Classicv7提供了一般建議。 此類部署，稱為 **混合** 或 **中間採購**，將市場活動營銷實例和營銷資料庫置於您的運營控制之下，同時使用Adobe雲消息服務發送電子郵件、SMS或SMPP消息，並收集開啟、彈出和按一下跟蹤資料。

市場營銷實例是Adobe Campaign體系結構中驅動所有市場營銷活動的部分，它儲存市場活動返回的所有收件人資料和分析資料。 市場營銷實例是一組運行Adobe Campaign服務的本地伺服器和一個關係資料庫。

>[!CAUTION]
>
>如果您使用的是完全托管的Adobe Campaign實例(部署在AdobeCloud Services中)，則本文檔中的資訊不適用。

軟體相容性詳見 [相容性清單](../../rn/using/compatibility-matrix.md)。


### 方案

針對以下三種典型情形提供了部署圖和硬體調整建議：

1. [中等大小](#scenario-1)  — 系統中500萬活動收件人
1. [大尺寸](#scenario-2)  — 系統中2 000萬活動收件人
1. [企業](#scenario-3) - 5,000萬活動收件人，具有事務性消息

### 假設

本文檔還假定所有三種方案的使用類型如下：

* 大型電子郵件活動每週發送兩次，大約50%的活動收件人
* 系統中每個收件人每月生成一次直接郵件
* 每月大約有10%的活動收件人收到SMS消息
* 定義每個收件人的資料庫模式已用一個附加表進行擴展，該表包含每個收件人大約200位元組的資料
* Adobe Campaign交互模組用於向傳出電子郵件添加優惠
* 電子郵件跟蹤資料在市場活動系統中保留90天

## 一般准則

市場活動是一個以資料庫為中心的應用程式，而資料庫伺服器效能是關鍵。 運行工作流、分段、跟蹤資料上載、入站交互、分析和其他活動都生成資料庫活動。 通常，這些操作的大小和頻率決定資料庫伺服器的大小。

您的營銷實例中的應用程式伺服器需要足夠的CPU和記憶體來運行工作流和響應SOAP API調用，包括來自市場活動控制台用戶的請求。 CPU要求對於使用具有複雜服務規則的出站交互的工作流、執行自定義Javascript的工作流以及具有高流量級別的Web應用程式來說非常重要。

市場活動Web應用程式也可以部署在營銷實例App伺服器上，或部署在單獨的Web伺服器系統上。 由於Web應用程式工作負載與關鍵工作流和市場活動控制台用戶衝突，因此Web應用程式和入站交互可以部署到不同的伺服器，以確保核心市場活動功能以良好的效能可靠地運行。

為了安全性和可用性，Adobe建議將Internet的通信量與業務用戶生成的通信量分開。 因此，圖包含兩組伺服器：Web伺服器（面向Internet的Web1和Web2），以及App伺服器（業務流程App1和App2）。

商業電子郵件發送者擁有一個功能正常的退出網頁是一項法律要求。 Adobe建議在每台組伺服器中部署冗餘電腦，以應對故障轉移情況。 如果Adobe Campaign主持選擇退出頁面，情況尤其如此。

### 反向代理

市場活動體系結構通過使用SSL over HTTP(HTTPS)在您的營銷實例和Adobe雲消息之間通信來強制實施高安全性。 通過在「非軍事區」(DMZ)子網中使用反向代理來隔離和保護營銷實例伺服器和資料庫，可以強制實現安全性、可靠性和可用性。

### 負載平衡器

App伺服器的負載平衡器是在主動/被動配置中設定的，HTTPS在代理處終止。 Web伺服器的負載平衡器是在活動/活動配置中設定的，HTTPS在代理處終止。

Adobe為您提供了可以中繼到部署環境中的Adobe Campaign伺服器的URL路徑的獨佔清單。

### 架構

無論卷大小，通用體系結構幾乎完全相同。 安全性和高可用性要求要求至少為四台伺服器；如果未使用WebApps，則使用兩台伺服器。 配置的差異主要取決於硬體配置，如CPU核心和記憶體。

## 方案1:中等規模部署{#scenario-1}

![](assets/scenario-1.png)

估計卷：

| 通道 | 卷 |
| ----------------------- | ----------------- |
| 活動收件人 | 500萬 |
| 電子郵件 | 420萬/月 |
| 直接郵件 | 100萬/月 |
| Mobile簡訊 | 10萬/月 |
| 每日電子郵件峰值 | 500 |

對於這些卷，一對Adobe Campaign應用程式伺服器系統為Adobe Campaign客戶端用戶和工作流執行提供了所有功能。 對於500萬活動收件人和此電子郵件卷，應用伺服器工作負載不會佔用CPU或I/O;大部分壓力都在資料庫上。

Adobe CampaignWeb伺服器顯示在安全區域中。

### Web和應用程式伺服器

本方案建議在四台電腦上安裝Adobe Campaign，並遵循以下規範：

**3Ghz+四核CPU,8 GB RAM,RAID 1或10,2個80 GB固態硬碟**

這些系統建立市場營銷實例Application Server，它直接支援您的市場活動控制台用戶並執行市場活動工作流。

反向DMZ中的代理，以平衡到Adobe CampaignWeb伺服器的流量。 無需在代理機上安裝Adobe Campaign軟體棧；任何反向代理軟體或網路設備均可使用。

訂閱選擇加入/退出和首選項中心功能可由市場活動或您自己的網站提供。 如果選擇在網站上實施此功能，則必須確保首選項和訂閱資訊傳播到市場活動市場營銷資料庫。 通常通過建立由市場活動工作流自動上載的抽取檔案來完成。

應用程式伺服器上的磁碟空間消耗取決於與第三方服務提供商交換的檔案的保留期（例如，直接郵件的打印供應商），以及導入的平面檔案的大小和保留期，如從您的網站訂閱或首選項更新，或從您自己的CRM或營銷系統中提取。

### 資料庫

資料庫伺服器的硬體建議如下：

**3Ghz+四核CPU,16 GB RAM,RAID 1或10,128 GB SSD**

記憶體估計假定大型市場活動啟動時大約有500,000個收件者完全快取，加上RDBMS緩衝區空間，用於執行工作流、導入跟蹤資料和其他併發活動。

據估計，資料庫上儲存所有Adobe Campaign技術資料（活動、跟蹤、工作表等）所需的磁碟空間約為35 GB，保留期為三個月。 如果您選擇將跟蹤資料保留6個月，則資料庫大小將增加到大約40 GB，而12個月的保留將資料庫大小增加到大約45 GB。 此環境的收件者資料消耗約5 GB。

>[!CAUTION]
>
>此估計不包括任何其他客戶資料。 如果您計畫將客戶資料的附加列或表複製到Adobe Campaign資料庫中，則必須估計該資料庫的附加磁碟空間需求。 上載的段/清單還需要更多儲存，具體取決於其大小、頻率和保留期。

還要考慮，由於每天處理的資訊量很大，因此資料庫伺服器的IOPS至關重要。 例如，在高峰日，您可以部署針對總共500,000個收件人的市場活動。 為執行每次活動，Adobe Campaign將500,000條記錄插入一個包含約1200萬條記錄的表中（傳遞日誌表）。 為了在市場活動部署期間提供可接受的效能，Adobe建議此方案的隨機讀/寫IOPS最少為60,000 4-KB。


## 方案2:大規模部署{#scenario-2}

![](assets/scenario-2.png)

估計卷：

| 通道 | 卷 |
| ----------------------- | ----------------- |
| 活動收件人 | 兩千萬 |
| 電子郵件 | 4200萬/月 |
| 直接郵件 | 1千萬/月 |
| Mobile簡訊 | 100萬/月 |
| 每日電子郵件峰值 | 500萬 |

### Web和應用程式伺服器

在此情形中，Adobe建議在四台電腦、兩台應用程式伺服器和兩台Web伺服器上安裝Adobe Campaign，並具有以下規範：

**3Ghz+四核CPU,8 GB RAM,RAID 1或10,80 GB固態硬碟**

應用程式伺服器直接支援市場活動控制台用戶和執行市場活動工作流。 此功能部署在兩個相同的伺服器上以實現高可用性，共用網路連接儲存(NAS)檔案系統以啟用故障切換。

Web伺服器承載支援系統中1000萬活動收件人的Campaig Web應用程式。

請參閱 [方案1:中等規模部署](#scenario-1) 有關代理、首選中心/訂閱處理和磁碟空間使用情況的更多注釋。

### 資料庫

資料庫伺服器的硬體建議如下：

**3Ghz+ 8核CPU,64 GB RAM,RAID 1或10,2個320 GB固態硬碟或RAID 10,640 GB固態硬碟**

記憶體估計假定大型市場活動啟動時大約有5,000,000個收件者被完全快取，另外還假定RDBMS緩衝區空間用於執行工作流、導入跟蹤資料和其他併發活動。

據估計，資料庫上儲存所有Adobe Campaign技術資料（活動、跟蹤、工作表等）所需的磁碟空間約為280 GB，保留期為3個月。 如果您選擇將跟蹤資料保留6個月，則資料庫大小將增加到大約450 GB，而12個月的保留將資料庫大小增加到大約900 GB。 此環境的收件者資料消耗約15 GB。

## 方案3:具有消息中心的企業部署{#scenario-3}

![](assets/scenario-3.png)

估計卷：

| 通道 | 卷 |
| ----------------------- | ----------------- |
| 活動收件人 | 5千萬 |
| 電子郵件 | 1.08億/月 |
| 直接郵件 | 2500萬/月 |
| Mobile簡訊 | 2,500萬/月 |
| 異動訊息 | 2,500萬/月 |
| 每日電子郵件峰值 | 250萬 |


支援5000萬收件人的部署與中所示的基本相同 [方案2](#scenario-2):市場活動Web應用程式流量被路由到市場活動Web伺服器，因此大型市場活動啟動後的Web流量突發不會影響市場活動工作流和客戶端控制台用戶。

此部署還包括從您自己的網站和應用程式驅動的消息中心呼叫。


### Web和應用程式伺服器

在此情形中，Adobe建議在四台電腦上安裝Adobe Campaign，如下所示：

* 應用程式伺服器
   **兩個系統，3Ghz+四核CPU,8-GB RAM,RAID 1或10,80-GB SSD**

* Web 伺服器
   **兩個系統，3Ghz+四核CPU,16 GB RAM,RAID 1或10,80 GB固態硬碟**


應用程式伺服器直接支援市場活動控制台用戶和執行市場活動工作流。 此功能部署在兩個相同的伺服器上以實現高可用性，共用網路連接儲存(NAS)檔案系統以啟用故障切換。

Web伺服器承載支援系統中1000萬活動收件人的Campaig Web應用程式。

請參閱 [方案1:中等規模部署](#scenario-1) 有關代理、首選中心/訂閱處理和磁碟空間使用情況的更多注釋。

### 資料庫

資料庫伺服器的硬體建議如下：

**3Ghz+ 8核CPU,96 GB RAM,RAID 1或10，最低1.5 TB固態硬碟**

記憶體估計假定大型市場活動啟動時大約有12,500,000個接收者被完全快取，另外還假定RDBMS緩衝區空間用於執行工作流、導入跟蹤資料和其他併發活動。

估計資料庫上儲存所有Adobe Campaign技術資料（活動、跟蹤、工作表等）所需的磁碟空間約為700 GB，保留期為3個月。 如果您選擇將跟蹤資料保留6個月，則資料庫大小將增加到大約1.2TB，而12個月的保留將資料庫大小增加到大約2TB。 此環境的收件者資料消耗約50 GB。

## 更改假設的指南

對這些方案所作的假設都對硬體建議和部署體系結構產生了重大影響。 本節討論有關不同假設的准則。 請與Adobe Campaign咨詢團隊聯繫，以獲得滿足您要求的具體建議。

* **收件人數**
活動收件人既需要儲存空間又需要資料庫緩衝區空間，因此更多收件人通常需要在資料庫伺服器上增加更多記憶體和CPU容量。 對於收件人本身而言，儲存增加相對較小，但對於為電子郵件活動保留的事件跟蹤資料來說，這可能是一個重要因素。

* **電子郵件市場活動大小**
活動啟動的頻率對資料庫伺服器CPU要求有影響。 與直接郵寄、入站交互和其他工作流相結合，電子郵件活動的細分操作給資料庫伺服器帶來了巨大的負載。

* **直郵頻率**
直接郵件的頻率可能會影響資料庫伺服器的CPU要求。 與市場活動啟動和其他工作流相結合，直接郵件的分段操作給資料庫伺服器帶來了巨大的負載。

* **SMS消息卷**
與電子郵件活動大小一樣，SMS消息卷不會在位於內部的活動伺服器上施加較大負載；負載主要在雲上的Adobe雲消息伺服器上。 對諸如電子郵件和直郵之類的簡訊活動進行細分會給市場營銷資料庫帶來很大的負擔。 因此，簡訊活動啟動的頻率和分段的複雜度比簡訊數量更相關。

* **資料庫架構複雜性**
每個活動收件人的資料量需要儲存空間和資料庫緩衝區空間，因此更多收件人通常需要更多的資料庫伺服器記憶體和CPU。 複雜的架構還要求連接更多表以進行分段，因此分段操作運行速度可能會慢得多，並且當資料跨多個表分佈時需要更多的資料庫CPU和記憶體。

   通過確保資料庫緩衝池足夠大以包含所有收件人資料、運行工作流的臨時表以及其他資料庫操作的餘量來估計資料庫伺服器記憶體。

* **出站交互用法**
在將所有計算複雜性交給資料庫的工作流中，將評估批處理模式下的交互規則。 資料庫上的主要工作因素是在一次引擎調用期間計算的合格聘用總數（目標大小X在保持N個最佳聘用前每個收件人的平均聘用數）。 資料庫伺服器CPU速度是效能的第一個因素。

* **入站交互或SOAP API使用**
入站交互規則和優惠在市場營銷資料庫中進行評估，需要大量資料庫伺服器資源，特別是CPU。 大量使用入站Interactions或SOAP API需要單獨的Web伺服器來將工作負載與運行Campaign工作流分開。

* **跟蹤資料保留期**
將跟蹤資料的保留期延長到90天以上需要更多的資料庫儲存，而且由於將新跟蹤資料插入大表中，因此可能會降低系統的速度。 跟蹤資料對於90天後的市場活動細分並不有用，因此建議縮短保留期。

   如果您需要對收件人的營銷經驗進行長期分析，則應將跟蹤資料移入Adobe Analytics或其他分析系統。

## 虛擬化

所有市場活動伺服器都是虛擬化的好候選。 必須解決若干問題，以確保適當的可用性和效能。

* **故障轉移配置**
群集伺服器（例如，負載平衡代理下的冗餘應用程式伺服器）必須部署在單獨的硬體上，以確保在出現硬體故障時兩個VM不會停機。

* **I/O配置**
必須維護任何建議的RAID配置以確保資料庫安全，以確保儲存設備的丟失不會導致資料丟失。

* **I/O效能**
必須尊重資料庫儲存的建議IOPS評級。 像AmazonEC2這樣的雲服務可能無法提供所需的效能，必須仔細評估。 例如，AmazonEC2預配置SSD卷當前的額定IOPS為20,000。 瞭解詳情 [Amazon文檔](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html))，因此4卷RAID配置的額定值為80,000 IOPS，這可能不夠。

Adobe建議在將系統投入生產之前對Adobe Campaign的任何虛擬化部署進行效能測試。

## 相關主題

* [市場活動監控流程](../../production/using/monitoring-processes.md)
* [市場活動總體架構](../../installation/using/general-architecture.md)
* [效能和吞吐量問題](../../production/using/performance-and-throughput-issues.md)
* [安全性與隱私權檢查清單](../../installation/using/get-started-security-privacy.md)
